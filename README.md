# ESD

# 防鳥擊風力發電機專題
### 設計者：張育瑞
### 指導老師：林均翰老師  

## 1. 期末專題概述

本專題使用 Arduino Uno 結合超音波感測器、紅外線感測器、伺服馬達 (SG90)、無源蜂鳴器、LED 和按鈕，模擬一套用於風力發電機的鳥擊防護系統。  
系統根據感測器的輸入啟動 LED 警示燈、伺服馬達煞車以及蜂鳴器發聲，並提供按鈕來調整警告距離。

---

## 2. 硬體組成

- **核心控制板**: Arduino Uno  
主控晶片：ATMEGA328.  
外接電源：7~12V，建議使用9V.  
USB埠供電：5V.  
EEPROM：2K.  
快閃記憶體：32K.  
SRAM：2K.  
時脈：16MHz.  
數位輸出/入腳位：14個，其中6個支援PWM.  
- **超音波感測器(HC-SR04)**: 用於測量距離，腳位接 D12 (Trig)、D13 (Echo)  
寬電壓工作：3V~ 5.5V  
與HC-SR04-P軟體與硬體尺寸完全兼容  
探測距離： 5V：2cm-450cm ； 3.3V：2cm-400cm  
探測角度：<15°  
採用工業級MCU，工作溫度：-20℃ ─ 80℃  
接口定義:VCC、trig(控制端)、echo(接收端)、GND  
尺寸: 4.5 x 2 cm  
- **紅外線感測器(HC-SR505)**: 用於偵測生物，腳位接 D11  
工作電壓範圍：DC4.5V-20V,  
靜態電流：＜60uA.  
電平輸出：高3.3v/低0v.  
可重複觸發,延時時間：默認8S+ -30%  
外形尺寸：10*23mm.  
感應角度：＜100度錐角,感應距離：3米以內  
工作溫度：-20~+80度  
感應透鏡尺寸：直徑10mm（默認）  

- **LED模組**: 模擬警示燈，腳位接 D7  
工作電壓：DC 3.3~5V  
接口：GVS 3P排針  
亮度：高亮  
定位孔大小：直徑3mm  
尺寸：30x21x16mm  
重量：3.1g  

- **伺服馬達 (SG90)**: 模擬風力發電機煞車機制，腳位接 D10  
重量：9g.  
尺寸：23x12.2x29mm.  
無負載操作速度：0.12秒/60度(4.8V)；0.10秒/60度(6.0V)  
扭矩：1.6kg·cm（4.8V）  
使用溫度:-30~+60攝氏度  
死區設定:5微秒  
工作電壓:3.5V~6V  .

- **無源蜂鳴器模組(Keyes)**: 發出警告聲，腳位接 D6
•	 工作電壓：3.3/ 5V（DC）  
•	接口： 3PIN接口  
•	控制訊號：方波，中心頻率為2KHz(無源蜂鳴器)  
•	 重量：3.6g  
•	尺寸: 34*22*12mm  

- **按鈕開關**: 用於調整警告距離，腳位分別接 D2 (增加距離) 和 D3 (減少距離)  
尺寸:4.3/5/7/9.5  
---

## 3. 軟體設計

### 3.1 功能描述

1. **距離測量與閃爍邏輯**:  
   - 超音波感測器測量距離，當目標進入測量範圍 (1-50 公分) 時，LED 按距離閃爍。  
2. **生物偵測與煞車機制**:  
   - 紅外線感測器偵測到生物且距離低於警告範圍時，啟動伺服馬達煞車，並觸發蜂鳴器警示。  
3. **按鈕調整警告距離**:  
   - 按下按鈕可以增加或減少警告距離，範圍在 1-50 公分之間。

### 3.2 解決資源競爭問題

為避免超音波感測器和伺服馬達在頻繁運行時產生資源衝突，加入了適當的 `delay` 確保伺服馬達穩定運作。

---

## 4. 安裝與使用

### 4.1 硬體連接

按照下列步驟連接元件：

1. **超音波感測器**:  
   - Trig 接 D12，Echo 接 D13。  
2. **紅外線感測器**:  
   - OUT 接 D11。  
3. **伺服馬達 (SG90)**:  
   - 控制訊號接 D10。  
4. **LED**:  
   - 接 D7。  
5. **無源蜂鳴器**:  
   - 接 D6。  
6. **按鈕**:  
   - 增加距離按鈕接 D2，減少距離按鈕接 D3。  

### 4.2 軟體上傳

1. 使用 Arduino IDE 打開 `防鳥擊風力發電機專案.ino`。
2. 將程式碼上傳至 Arduino Uno 開發板。

### 4.3 操作說明

1. 接通電源，系統會初始化並設定初始警告距離為 20 公分。  
2. 按下按鈕調整警告距離：  
   - **增加按鈕 (D2)**：增加警告距離 (上限為 50 公分)。  
   - **減少按鈕 (D3)**：減少警告距離 (下限為 1 公分)。  
3. 生物進入警告範圍時：  
   - LED 閃爍頻率根據目標距離變化。  
   - 紅外線感測器觸發煞車機制，伺服馬達調整至煞車角度，蜂鳴器開始發聲。  
4. 生物離開警告範圍時：  
   - 系統恢復正常，伺服馬達回到預設角度，蜂鳴器停止發聲。  

---

## 5. 技術細節

- **舵機角度**:  
  - 正常狀態: 0 度  
  - 煞車狀態: 90 度  
- **蜂鳴器頻率**: 1000 Hz  
- **LED 閃爍延遲**:  
  - 根據距離以 `map()` 函數從 50 ms 到 500 ms 動態調整。  

---

## 6. 注意事項

1. 超音波感測器必須保持清潔，避免環境噪聲影響距離測量精度。  
2. 確保按鈕接線穩定，防止因接觸不良導致重複觸發。  
3. 如果伺服馬達異常抖動，請檢查供電電壓是否穩定。  
